(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6825],{7757:function(e,t,n){e.exports=n(5666)},4184:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&e.push(s)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},2167:function(e,t,n){"use strict";var r=n(3848);t.default=void 0;var i,o=(i=n(7294))&&i.__esModule?i:{default:i},s=n(1063),a=n(4651),u=n(7426);var c={};function l(e,t,n,r){if(e&&s.isLocalURL(t)){e.prefetch(t,n,r).catch((function(e){0}));var i=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;c[t+"%"+n+(i?"%"+i:"")]=!0}}var f=function(e){var t,n=!1!==e.prefetch,i=a.useRouter(),f=o.default.useMemo((function(){var t=s.resolveHref(i,e.href,!0),n=r(t,2),o=n[0],a=n[1];return{href:o,as:e.as?s.resolveHref(i,e.as):a||o}}),[i,e.href,e.as]),d=f.href,h=f.as,p=e.children,v=e.replace,m=e.shallow,g=e.scroll,b=e.locale;"string"===typeof p&&(p=o.default.createElement("a",null,p));var y=(t=o.default.Children.only(p))&&"object"===typeof t&&t.ref,_=u.useIntersection({rootMargin:"200px"}),T=r(_,2),w=T[0],k=T[1],A=o.default.useCallback((function(e){w(e),y&&("function"===typeof y?y(e):"object"===typeof y&&(y.current=e))}),[y,w]);o.default.useEffect((function(){var e=k&&n&&s.isLocalURL(d),t="undefined"!==typeof b?b:i&&i.locale,r=c[d+"%"+h+(t?"%"+t:"")];e&&!r&&l(i,d,h,{locale:t})}),[h,d,k,b,n,i]);var I={ref:A,onClick:function(e){t.props&&"function"===typeof t.props.onClick&&t.props.onClick(e),e.defaultPrevented||function(e,t,n,r,i,o,a,u){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&s.isLocalURL(n))&&(e.preventDefault(),null==a&&r.indexOf("#")>=0&&(a=!1),t[i?"replace":"push"](n,r,{shallow:o,locale:u,scroll:a}))}(e,i,d,h,v,m,g,b)},onMouseEnter:function(e){s.isLocalURL(d)&&(t.props&&"function"===typeof t.props.onMouseEnter&&t.props.onMouseEnter(e),l(i,d,h,{priority:!0}))}};if(e.passHref||"a"===t.type&&!("href"in t.props)){var E="undefined"!==typeof b?b:i&&i.locale,L=i&&i.isLocaleDomain&&s.getDomainLocale(h,E,i&&i.locales,i&&i.domainLocales);I.href=L||s.addBasePath(s.addLocale(h,E,i&&i.defaultLocale))}return o.default.cloneElement(t,I)};t.default=f},7426:function(e,t,n){"use strict";var r=n(3848);Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!s,u=i.useRef(),c=i.useState(!1),l=r(c,2),f=l[0],d=l[1],h=i.useCallback((function(e){u.current&&(u.current(),u.current=void 0),n||f||e&&e.tagName&&(u.current=function(e,t,n){var r=function(e){var t=e.rootMargin||"",n=a.get(t);if(n)return n;var r=new Map,i=new IntersectionObserver((function(e){e.forEach((function(e){var t=r.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return a.set(t,n={id:t,observer:i,elements:r}),n}(n),i=r.id,o=r.observer,s=r.elements;return s.set(e,t),o.observe(e),function(){s.delete(e),o.unobserve(e),0===s.size&&(o.disconnect(),a.delete(i))}}(e,(function(e){return e&&d(e)}),{rootMargin:t}))}),[n,t,f]);return i.useEffect((function(){if(!s&&!f){var e=o.requestIdleCallback((function(){return d(!0)}));return function(){return o.cancelIdleCallback(e)}}}),[f]),[h,f]};var i=n(7294),o=n(3447),s="undefined"!==typeof IntersectionObserver;var a=new Map},1664:function(e,t,n){e.exports=n(2167)},929:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=n(7294),d=n(5697),h=n.n(d);function p(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){p(o,r,i,s,a,"next",e)}function a(e){p(o,r,i,s,a,"throw",e)}s(void 0)}))}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(u){a=!0,i=u}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=n(7757),y=n.n(b),_="object"===("undefined"==typeof window||"undefined"==typeof window?"undefined":u(window)),T=_?document:{},w=["mousemove","keydown","wheel","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove","visibilitychange"];function k(e,t){var n;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){e.apply(void 0,i),n=null}),t)}return r.cancel=function(){clearTimeout(n)},r}function A(e,t){var n=0;return function(){var r=(new Date).getTime();if(!(r-n<t))return n=r,e.apply(void 0,arguments)}}var I=0,E=0;function L(){var e=(new Date).getTime();return e===I?1e3*e+ ++E:(I=e,E=0,1e3*e)}function O(){return Math.random().toString(36).substring(2)}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}function S(){return(new Date).getTime()}var D={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e)};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close()},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(e){return Promise.reject(e)}},canBeUsed:function(){return"function"==typeof BroadcastChannel},type:"broadcastChannel",averageResponseTime:function(){return 150},microSeconds:L},P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4;r(this,e),this.ttl=t,this.set=new Set,this.timeMap=new Map}return o(e,[{key:"has",value:function(e){return this.set.has(e)}},{key:"add",value:function(e){this.timeMap.set(e,S()),this.set.add(e),this._removeTooOldValues()}},{key:"clear",value:function(){this.set.clear(),this.timeMap.clear()}},{key:"_removeTooOldValues",value:function(){for(var e=S()-this.ttl,t=this.set[Symbol.iterator]();;){var n=t.next().value;if(!n)return;if(!(this.timeMap.get(n)<e))return;this.timeMap.delete(n),this.set.delete(n)}}}]),e}();function R(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}function C(e,t){var n=e,r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",r),r}function x(){var e=R();if(!e)return!1;try{var t="__check";e.setItem(t,"works"),e.removeItem(t)}catch(e){return!1}return!0}var j={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!x())throw new Error("\u274c localStorage cannot be used.");var n=O(),r=new P(t.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=C(e,(function(e){i.messagesCallback&&e.uuid!==n&&e.token&&!r.has(e.token)&&(e.data.time&&e.data.time<i.messagesCallbackTime||(r.add(e.token),i.messagesCallback(e.data)))})),i},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){var r=e.channelName,i={token:O(),time:(new Date).getTime(),data:t,uuid:e.uuid},o=JSON.stringify(i);R().setItem(r,o);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=r,s.newValue=o,window.dispatchEvent(s),n()}))},canBeUsed:x,type:"localStorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:L},B=new Set,N={create:function(e){var t={name:e,messagesCallback:null};return B.add(t),t},close:function(e){B.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(B).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),n()}),5)}))},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:L},U=[D,j];function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.type){if("simulate"===e.type)return N;var t=U.find((function(t){return t.type===e.type}));if(t)return t;throw new Error("\u274c Method ".concat(e.type," is not supported."))}var n=U.find((function(e){return e.canBeUsed()}));if(!n)throw new Error("\u274c No method found ".concat(JSON.stringify(U.map((function(e){return e.type})))));return n}var Y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.name=t,this.options=n,this.method=X(this.options),this.closed=!1,this._isListening=!1,this._onMessageListener=null,this._addEventListeners={message:[],internal:[]},this._unSendMessagePromises=new Set,this._beforeClose=[],this._preparePromises=null,K(this)}return o(e,[{key:"postMessage",value:function(e){if(this.closed)throw new Error("\u274c Cannot post message after channel has closed");return F(this,"message",e)}},{key:"postInternal",value:function(e){return F(this,"internal",e)}},{key:"onmessage",get:function(){return this._onMessageListener},set:function(e){var t={time:this.method.microSeconds(),fn:e};J(this,"message",this._onMessageListener),e&&"function"==typeof e?(this._onMessageListener=t,H(this,"message",t)):this._onMessageListener=null}},{key:"addEventListener",value:function(e,t){H(this,e,{time:this.method.microSeconds(),fn:t})}},{key:"removeEventListener",value:function(e,t){J(this,e,this._addEventListeners[e].find((function(e){return e.fn===t})))}},{key:"close",value:function(){var e=this;if(!this.closed){this.closed=!0;var t=this._preparePromises?this._preparePromises:Promise.resolve();return this._onMessageListener=null,this._addEventListeners.message=[],t.then((function(){return Promise.all(Array.from(e._unSendMessagePromises))})).then((function(){return Promise.all(e._beforeClose.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}}},{key:"type",get:function(){return this.method.type}},{key:"isClosed",value:function(){return this.closed}}]),e}();function F(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._preparePromises?e._preparePromises:Promise.resolve()).then((function(){var t=e.method.postMessage(e._state,r);return e._unSendMessagePromises.add(t),t.catch().then((function(){return e._unSendMessagePromises.delete(t)})),t}))}function K(e){var t,n=e.method.create(e.name,e.options);(t=n)&&"function"==typeof t.then?(e._preparePromises=n,n.then((function(t){e._state=t}))):e._state=n}function V(e){return e._addEventListeners.message.length>0||e._addEventListeners.internal.length>0}function H(e,t,n){e._addEventListeners[t].push(n),function(e){if(!e._isListening&&V(e)){var t=function(t){e._addEventListeners[t.type].forEach((function(e){t.time>=e.time&&e.fn(t.data)}))},n=e.method.microSeconds();e._preparePromises?e._preparePromises.then((function(){e._isListening=!0,e.method.onMessage(e._state,t,n)})):(e._isListening=!0,e.method.onMessage(e._state,t,n))}}(e)}function J(e,t,n){e._addEventListeners[t]=e._addEventListeners[t].filter((function(e){return e!==n})),function(e){if(e._isListening&&!V(e)){e._isListening=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}var q=function(){function e(t,n){var i=this;r(this,e),this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=O(),this._isApplying=!1,this._reApply=!1,this._unloadFns=[],this._listeners=[],this._intervals=[],this._duplicateListeners=function(){},this._duplicateCalled=!1,this._onBeforeDie=v(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));var o=function(){var e=v(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.die());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();_&&(window.addEventListener("beforeUnload",o),window.addEventListener("unload",o),this._unloadFns.push(["beforeUnload",o]),this._unloadFns.push(["unload",o]))}var t;return o(e,[{key:"applyOnce",value:function(){var e=this;if(this.isLeader)return Promise.resolve(!1);if(this.isDead)return Promise.resolve(!1);if(this._isApplying)return this._reApply=!0,Promise.resolve(!1);this._isApplying=!0;var t=!1,n=function(n){"leader"===n.context&&n.token!==e.token&&("apply"===n.action&&n.token>e.token&&(t=!0),"tell"===n.action&&(t=!0))};return this._channel.addEventListener("internal",n),z(this,"apply").then((function(){return M(e._options.responseTime)})).then((function(){return t?Promise.reject(new Error):z(e,"apply")})).then((function(){return M(e._options.responseTime)})).then((function(){return t?Promise.reject(new Error):z(e)})).then((function(){return function(e){e.isLeader=!0;var t=function(t){"leader"===t.context&&"apply"===t.action&&z(e,"tell"),"leader"!==t.context||"tell"!==t.action||e._duplicateCalled||(e._duplicateCalled=!0,e._duplicateListeners(),z(e,"tell"))};return e._channel.addEventListener("internal",t),e._listeners.push(t),z(e,"tell")}(e)})).then((function(){return!0})).catch((function(){return!1})).then((function(t){return e._channel.removeEventListener("internal",n),e._isApplying=!1,!t&&e._reApply?(e._reApply=!1,e.applyOnce()):t}))}},{key:"awaitLeadership",value:function(){var e;return this._awaitLeadershipPromise||(this._awaitLeadershipPromise=(e=this).isLeader?Promise.resolve():new Promise((function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",o),t(!0))}e.applyOnce().then((function(){e.isLeader&&r()}));var i=setInterval((function(){e.applyOnce().then((function(){e.isLeader&&r()}))}),e._options.fallbackInterval);e._intervals.push(i);var o=function(t){"leader"===t.context&&"death"===t.action&&e.applyOnce().then((function(){e.isLeader&&r()}))};e._channel.addEventListener("internal",o),e._listeners.push(o)}))),this._awaitLeadershipPromise}},{key:"onDuplicate",get:function(){return this._duplicateListeners},set:function(e){this._duplicateListeners=e}},{key:"onBeforeDie",get:function(){return this._onBeforeDie},set:function(e){this._onBeforeDie=e}},{key:"die",value:(t=v(y().mark((function e(){var t=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDead){e.next=2;break}return e.abrupt("return");case 2:return this.isDead=!0,e.next=5,this.onBeforeDie();case 5:return this._listeners.forEach((function(e){return t._channel.removeEventListener("internal",e)})),this._intervals.forEach((function(e){return clearInterval(e)})),this._unloadFns.forEach((function(e){_&&window.removeEventListener(e[0],e[1])})),e.abrupt("return",z(this,"death"));case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function z(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}var W=function(e){var t=e.type,n=e.channelName,r=e.fallbackInterval,i=e.responseTime,o=e.emitOnAllTabs,s=e.callbacks,a=e.start,u=e.reset,c=e.pause,l=e.resume,f=new Y(n,{type:t}),d=function(e,t){if(e._leaderElector)throw new Error("\u274c MessageChannel already has a leader-elector");var n=new q(e,t);return e._beforeClose.push(v(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.die());case 1:case"end":return e.stop()}}),e)})))),e._leaderElector=n,n}(f,{fallbackInterval:r,responseTime:i}),h={};h[d.token]=!1;var p=!1,m=!0,b=function(){return p};d.awaitLeadership().then((function(){p=!0})),f.addEventListener("message",(function(e){var t=g(e,2),n=t[0],r=t[1];switch(n){case"register":h[r]=!1;break;case"deregister":delete h[r];break;case"idle":_(r);break;case"active":T(r);break;case"emitIdle":s.onIdle();break;case"emitActive":s.onActive();break;case"start":a(!0);break;case"reset":u(!0);break;case"pause":c(!0);break;case"resume":l(!0)}}));var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.token;h[e]=!0;var t=Object.values(h).every((function(e){return e}));!m&&t&&(m=!0,b()?(s.onIdle(),o&&w("emitIdle")):w("idle"))},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.token;h[e]=!1;var t=Object.values(h).some((function(e){return!e}));m&&t&&(m=!1,b()?(s.onActive(),o&&w("emitActive")):w("active"))};d.onDuplicate=v(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.die();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),d.onBeforeDie=v(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("deregister");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));var w=function(){var e=v(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.postMessage([t,d.token]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=v(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.die();case 2:return e.next=4,f.close();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return w("register"),{close:k,send:w,isLeader:b,idle:_,active:T,isAllIdle:function(){return m},setAllIdle:function(e){m=e}}};var $=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,f.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}(n);function n(e){var i;if(r(this,n),(i=t.call(this,e)).state={idle:!1,oldDate:+new Date,lastActive:+new Date,lastIdle:null,idleTime:0,remaining:null,pageX:null,pageY:null},i.tId=null,i.eventsBound=!1,i.callbackRefs={},e.debounce>0&&e.throttle>0)throw new Error("onAction can either be throttled or debounced (not both)");return e.debounce>0?i._onAction=k(e.onAction,e.debounce):e.throttle>0?i._onAction=A(e.onAction,e.throttle):i._onAction=e.onAction,e.eventsThrottle>0?i.handleEvent=A(i._handleEvent.bind(s(i)),e.eventsThrottle):i.handleEvent=i._handleEvent.bind(s(i)),e.startOnMount&&!e.startManually||(i.state.idle=!0),i._toggleIdleState=i._toggleIdleState.bind(s(i)),i.start=i.start.bind(s(i)),i.reset=i.reset.bind(s(i)),i.pause=i.pause.bind(s(i)),i.resume=i.resume.bind(s(i)),i.isIdle=i.isIdle.bind(s(i)),i.getRemainingTime=i.getRemainingTime.bind(s(i)),i.getElapsedTime=i.getElapsedTime.bind(s(i)),i.getLastActiveTime=i.getLastActiveTime.bind(s(i)),i.getLastIdleTime=i.getLastIdleTime.bind(s(i)),i.getTotalIdleTime=i.getTotalIdleTime.bind(s(i)),i.getTotalActiveTime=i.getTotalActiveTime.bind(s(i)),i}return o(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.startOnMount,n=e.startManually;this._setupTabManager(),n||(t?this.start():this._bindEvents())}},{key:"componentDidUpdate",value:function(e){e.debounce!==this.props.debounce&&this.props.debounce>0?(this._onAction.cancel&&this._onAction.cancel(),this._onAction=k(this.props.onAction,this.props.debounce)):e.throttle!==this.props.throttle&&this.props.throttle>0?(this._onAction.cancel&&this._onAction.cancel(),this._onAction=A(this.props.onAction,this.props.throttle)):(e.throttle&&0===this.props.throttle||e.debounce&&0===this.props.debounce)&&(this._onAction.cancel&&this._onAction.cancel(),this._onAction=this.props.onAction),e.eventsThrottle!==this.props.eventsThrottle&&(this._unbindEvents(),this.handleEvent=A(this._handleEvent.bind(this),this.props.eventsThrottle),this._bindEvents()),e.timeout!==this.props.timeout&&this.state.idle&&this.reset(),e.onActive!==this.props.onActive&&(this.callbackRefs.onActive=this.props.onActive),e.onIdle!==this.props.onIdle&&(this.callbackRefs.onIdle=this.props.onIdle)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.tId),this._unbindEvents(!0),this._onAction.cancel&&this._onAction.cancel(),this.manager&&this.manager.close().catch(console.error)}},{key:"render",value:function(){return this.props.children||null}},{key:"_setupTabManager",value:function(){var e=this.props,t=e.crossTab,n=e.onIdle,r=e.onActive;if(this.callbackRefs={onIdle:n,onActive:r},t){var i=Object.assign({channelName:"idle-timer",fallbackInterval:2e3,responseTime:100,removeTimeout:6e4,emitOnAllTabs:!1},!0===t?{}:t),o=i.type,s=i.channelName,a=i.fallbackInterval,u=i.responseTime,c=i.emitOnAllTabs;this.manager=W({type:o,channelName:s,fallbackInterval:a,responseTime:u,emitOnAllTabs:c,callbacks:this.callbackRefs,start:this.start,reset:this.reset,pause:this.pause,resume:this.resume})}}},{key:"_bindEvents",value:function(){var e=this;if(_){var t=this.props,n=t.element,r=t.events,i=t.passive,o=t.capture;this.eventsBound||(r.forEach((function(t){n.addEventListener(t,e.handleEvent,{capture:o,passive:i})})),this.eventsBound=!0)}}},{key:"_unbindEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_){var n=this.props,r=n.element,i=n.events,o=n.passive,s=n.capture;(this.eventsBound||t)&&(i.forEach((function(t){r.removeEventListener(t,e.handleEvent,{capture:s,passive:o})})),this.eventsBound=!1)}}},{key:"_toggleIdleState",value:function(e){var t=this;this.setState((function(e){return{idle:!e.idle,lastIdle:e.idle?e.lastIdle:+new Date-t.props.timeout,idleTime:e.idle?e.idleTime+ +new Date-e.lastIdle:e.idleTime}}),(function(){var n=t.props,r=n.onActive,i=n.onIdle,o=n.stopOnIdle;t.state.idle?(o&&(clearTimeout(t.tId),t.tId=null,t._unbindEvents()),t.manager?t.manager.idle():i(e)):(t._bindEvents(),t.manager?t.manager.active():r(e))}))}},{key:"_handleEvent",value:function(e){var t=this.state,n=t.remaining,r=t.pageX,i=t.pageY,o=t.idle,s=this.props,a=s.timeout,u=s.stopOnIdle;if(this._onAction(e),!n){if("mousemove"===e.type){if(e.pageX===r&&e.pageY===i)return;if(void 0===e.pageX&&void 0===e.pageY)return;if(this.getElapsedTime()<200)return}clearTimeout(this.tId),this.tId=null;var c=+new Date-this.getLastActiveTime();(o&&!u||!o&&c>a)&&this._toggleIdleState(e),this.setState({lastActive:+new Date,pageX:e.pageX,pageY:e.pageY}),o&&u||(this.tId=setTimeout(this._toggleIdleState,a))}}},{key:"start",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];clearTimeout(this.tId),this.tId=null,this._bindEvents(),this.setState({idle:!1,oldDate:+new Date,lastActive:+new Date,remaining:null}),this.manager&&(this.manager.setAllIdle(!1),!e&&this.props.crossTab.emitOnAllTabs&&this.manager.send("start"));var t=this.props.timeout;this.tId=setTimeout(this._toggleIdleState,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearTimeout(this.tId),this.tId=null,this._bindEvents(),this.state.idle&&(this.manager?this.manager.active():this.props.onActive()),this.manager&&(this.manager.setAllIdle(!1),!e&&this.props.crossTab.emitOnAllTabs&&this.manager.send("reset")),this.setState({idle:!1,oldDate:+new Date,lastActive:+new Date,remaining:null});var t=this.props.timeout;this.tId=setTimeout(this._toggleIdleState,t)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.remaining;null===t&&(this._unbindEvents(),clearTimeout(this.tId),this.tId=null,this.manager&&!e&&this.props.crossTab.emitOnAllTabs&&this.manager.send("pause"),this.setState({remaining:this.getRemainingTime()}))}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state,n=t.remaining,r=t.idle;null!==n&&(this._bindEvents(),this.manager&&!e&&this.props.crossTab.emitOnAllTabs&&this.manager.send("resume"),r||(this.tId=setTimeout(this._toggleIdleState,n),this.setState({remaining:null,lastActive:+new Date})))}},{key:"getRemainingTime",value:function(){var e=this.state,t=e.remaining,n=e.lastActive,r=this.props.timeout;if(null!==t)return t<0?0:t;var i=r-(+new Date-n);return i<0?0:i}},{key:"getElapsedTime",value:function(){var e=this.state.oldDate;return+new Date-e}},{key:"getLastIdleTime",value:function(){return this.state.lastIdle}},{key:"getTotalIdleTime",value:function(){var e=this.state,t=e.idle,n=e.lastIdle,r=e.idleTime;return t?+new Date-n+r:r}},{key:"getLastActiveTime",value:function(){return this.state.lastActive}},{key:"getTotalActiveTime",value:function(){return this.getElapsedTime()-this.getTotalIdleTime()}},{key:"isIdle",value:function(){return this.state.idle}},{key:"isLeader",value:function(){return!this.manager||this.manager.isLeader()}}]),n}();function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timeout,n=void 0===t?12e5:t,r=e.element,i=void 0===r?T:r,o=e.events,s=void 0===o?w:o,a=e.onIdle,u=void 0===a?function(){}:a,c=e.onActive,l=void 0===c?function(){}:c,d=e.onAction,h=void 0===d?function(){}:d,p=e.debounce,m=void 0===p?0:p,g=e.throttle,b=void 0===g?0:g,I=e.eventsThrottle,E=void 0===I?200:I,L=e.startOnMount,O=void 0===L||L,M=e.startManually,S=void 0!==M&&M,D=e.stopOnIdle,P=void 0!==D&&D,R=e.capture,C=void 0===R||R,x=e.passive,j=void 0===x||x,B=e.crossTab,N=void 0!==B&&B,U=(0,f.useRef)(!1),X=(0,f.useRef)(!0),Y=(0,f.useRef)(+new Date),F=(0,f.useRef)(null),K=(0,f.useRef)(null),V=(0,f.useRef)(null),H=(0,f.useRef)(null),J=(0,f.useRef)(null),q=(0,f.useRef)(null),z=(0,f.useRef)(0),$=(0,f.useRef)(!0),G=(0,f.useRef)(n),Q=(0,f.useRef)(null);N&&(!0===N&&(N={}),N=Object.assign({channelName:"idle-timer",fallbackInterval:2e3,responseTime:100,removeTimeout:6e4,emitOnAllTabs:!1},N));var Z=(0,f.useRef)(u),ee=(0,f.useRef)(l),te=(0,f.useRef)(h);(0,f.useEffect)((function(){Z.current=u}),[u]),(0,f.useEffect)((function(){ee.current=l}),[l]),(0,f.useEffect)((function(){te.current=h}),[h]);var ne=(0,f.useMemo)((function(){function e(e){te.current(e)}return e.cancel&&e.cancel(),m>0?k(e,m):b>0?A(e,b):e}),[b,m]),re=function(e){var t=!X.current;X.current=t,t?(P&&(clearTimeout(H.current),H.current=null,ae()),q.current=+new Date-G.current,Q.current?Q.current.idle():Z.current(e)):(z.current+=+new Date-q.current,se(),Q.current?Q.current.active():ee.current(e))},ie=function(e){if(ne(e),!F.current){if("mousemove"===e.type){if(e.pageX===K&&e.pageY===V)return;if(void 0===e.pageX&&void 0===e.pageY)return;if(ce()<200)return}clearTimeout(H.current),H.current=null;var t=+new Date-de();(X.current&&!P||!X.current&&t>G.current)&&re(e),J.current=+new Date,K.current=e.pageX,V.current=e.pageY,X.current||(H.current=setTimeout(re,G.current))}},oe=(0,f.useRef)(ie),se=function(){_&&(U.current||(s.forEach((function(e){i.addEventListener(e,oe.current,{capture:C,passive:j})})),U.current=!0))},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_&&(U.current||e)&&(s.forEach((function(e){i.removeEventListener(e,oe.current,{capture:C,passive:j})})),U.current=!1)},ue=function(){if(null!==F.current)return F.current<0?0:F.current;var e=G.current-(+new Date-J.current);return e<0?0:e},ce=function(){return+new Date-Y.current},le=function(){return q.current},fe=function(){return X.current?+new Date-q.current+z.current:z.current},de=function(){return J.current},he=function(){return ce()-fe()},pe=function(){return X.current},ve=function(){return!Q.current||Q.current.isLeader()},me=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearTimeout(H.current),H.current=null,se(),X.current=!1,Y.current=+new Date,J.current=+new Date,F.current=null,Q.current&&(Q.current.setAllIdle(!1),!e&&N.emitOnAllTabs&&Q.current.send("start")),H.current=setTimeout(re,G.current)},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearTimeout(H.current),H.current=null,se(),X.current&&(Q.current?Q.current.active():ee.current()),X.current=!1,Y.current=+new Date,J.current=+new Date,F.current=null,Q.current&&(Q.current.setAllIdle(!1),!e&&N.emitOnAllTabs&&Q.current.send("reset")),H.current=setTimeout(re,G.current)},be=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===F.current&&(ae(),clearTimeout(H.current),H.current=null,F.current=ue(),Q.current&&!e&&N.emitOnAllTabs&&Q.current.send("pause"))},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null!==F.current&&(se(),X.current||(H.current=setTimeout(re,F.current),F.current=null,J.current=+new Date),Q.current&&!e&&N.emitOnAllTabs&&Q.current.send("resume"))};return(0,f.useEffect)((function(){if(m>0&&b>0)throw new Error("onAction can either be throttled or debounced (not both)");return N&&(Q.current=W({type:N.type,channelName:N.channelName,fallbackInterval:N.fallbackInterval,responseTime:N.responseTime,emitOnAllTabs:N.emitOnAllTabs,callbacks:{onIdle:Z.current,onActive:ee.current},start:me,reset:ge,pause:be,resume:ye})),S?v(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(H.current),ae(!0),!N){e.next=5;break}return e.next=5,Q.current.close();case 5:case"end":return e.stop()}}),e)}))):(O?me():se(),v(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(H.current),ae(!0),ne.cancel&&ne.cancel(),!N){e.next=6;break}return e.next=6,Q.current.close();case 6:case"end":return e.stop()}}),e)}))))}),[]),(0,f.useEffect)((function(){var e=U.current;e&&ae(),oe.current=E>0?A(ie,E):ie,e&&se()}),[E]),(0,f.useEffect)((function(){G.current=n,!$.current&&X.current&&ge(),$.current=!1}),[n]),{isIdle:pe,isLeader:ve,start:me,pause:be,reset:ge,resume:ye,getLastIdleTime:le,getTotalIdleTime:fe,getLastActiveTime:de,getTotalActiveTime:he,getElapsedTime:ce,getRemainingTime:ue}}$.propTypes={timeout:h().number,events:h().arrayOf(h().string),onIdle:h().func,onActive:h().func,onAction:h().func,debounce:h().number,throttle:h().number,eventsThrottle:h().number,element:h().oneOfType([h().object,h().element]),startOnMount:h().bool,startManually:h().bool,stopOnIdle:h().bool,passive:h().bool,capture:h().bool,crossTab:h().oneOfType([h().bool,h().shape({type:h().oneOf(["broadcastChannel","localStorage","simulate"]),channelName:h().string,fallbackInterval:h().number,responseTime:h().number,removeTimeout:h().number,emitOnAllTabs:h().bool})])},$.defaultProps={timeout:12e5,element:T,events:w,onIdle:function(){},onActive:function(){},onAction:function(){},debounce:0,throttle:0,eventsThrottle:200,startOnMount:!0,startManually:!1,stopOnIdle:!1,capture:!0,passive:!0,crossTab:!1},G.propTypes={timeout:h().number,events:h().arrayOf(h().string),onIdle:h().func,onActive:h().func,onAction:h().func,debounce:h().number,throttle:h().number,eventsThrottle:h().number,element:h().oneOfType([h().object,h().element]),startOnMount:h().bool,startManually:h().bool,stopOnIdle:h().bool,passive:h().bool,capture:h().bool,crossTab:h().oneOfType([h().bool,h().shape({type:h().oneOf(["broadcastChannel","localStorage","simulate"]),channelName:h().string,fallbackInterval:h().number,responseTime:h().number,removeTimeout:h().number,emitOnAllTabs:h().bool})])},G.defaultProps={timeout:12e5,element:T,events:w,onIdle:function(){},onActive:function(){},onAction:function(){},debounce:0,throttle:0,eventsThrottle:200,startOnMount:!0,startManually:!1,stopOnIdle:!1,capture:!0,passive:!0,crossTab:!1}}}]);